<div class="image-uploader-container flex flex-col items-center gap-4">
    <p-toast></p-toast>

    <div *ngIf="showPreview && previewUrl"
        class="preview-container relative w-full h-48 border rounded-lg overflow-hidden bg-gray-100 flex items-center justify-center">
        <img [src]="previewUrl" alt="Preview" class="max-w-full max-h-full object-contain" />
    </div>

    <div *ngIf="showPreview && !previewUrl"
        class="preview-placeholder w-full h-48 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center text-gray-400">
        <i class="pi pi-image text-4xl"></i>
    </div>

    <div class="upload-actions w-full">
        <!-- Using PrimeNG FileUpload in basic mode for custom handling -->
        <p-fileUpload mode="basic" name="file" [chooseLabel]="label" accept="image/*" [maxFileSize]="5000000"
            (onSelect)="onFileSelect($event)" [auto]="true" chooseIcon="pi pi-upload" styleClass="w-full">
        </p-fileUpload>

        <div *ngIf="isUploading" class="mt-2 text-sm text-blue-600 text-center">
            <i class="pi pi-spin pi-spinner mr-2"></i> Uploading...
        </div>
    </div>
</div>