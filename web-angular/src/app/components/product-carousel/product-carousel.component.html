@if (products.length <= 2) { <div class="grid grid-cols-2 gap-3">
    @for (product of products; track product.id) {
    <app-product-card [product]="product" [brandColor]="brandColor"></app-product-card>
    }
    </div>
    } @else {
    <div class="relative group/carousel">
        <!-- Navigation Arrows -->
        @if (canScrollRight()) {
        <button (click)="scroll('right')"
            class="absolute right-0 top-1/2 -translate-y-1/2 translate-x-3 z-10 w-8 h-8 rounded-full bg-background/90 backdrop-blur border border-border/50 flex items-center justify-center text-foreground opacity-0 group-hover/carousel:opacity-100 transition-opacity shadow-lg hover:scale-110"
            [style.color]="'hsl(' + brandColor + ')'">
            <lucide-icon [name]="ChevronRight" class="w-4 h-4"></lucide-icon>
        </button>
        }

        @if (canScrollLeft()) {
        <button (click)="scroll('left')"
            class="absolute left-0 top-1/2 -translate-y-1/2 -translate-x-3 z-10 w-8 h-8 rounded-full bg-background/90 backdrop-blur border border-border/50 flex items-center justify-center text-foreground opacity-0 group-hover/carousel:opacity-100 transition-opacity shadow-lg hover:scale-110"
            [style.color]="'hsl(' + brandColor + ')'">
            <lucide-icon [name]="ChevronLeft" class="w-4 h-4"></lucide-icon>
        </button>
        }

        <!-- Products Container -->
        <div #scrollContainer (scroll)="checkScroll()"
            class="flex gap-3 overflow-x-auto scrollbar-hide pb-2 snap-x snap-mandatory"
            style="scrollbar-width: none; -ms-overflow-style: none;" dir="rtl">
            @for (product of products; track product.id) {
            <div class="flex-shrink-0 w-[140px] snap-start">
                <app-product-card [product]="product" [brandColor]="brandColor"></app-product-card>
            </div>
            }
        </div>

        <!-- Scroll Indicator -->
        <div class="flex justify-center gap-1 mt-2">
            @for (item of products.slice(0, 5); track $index) {
            <div class="w-1.5 h-1.5 rounded-full bg-muted-foreground/30"></div>
            }
        </div>
    </div>
    }